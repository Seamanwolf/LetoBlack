<div class="modal fade" id="assignNumberModal" tabindex="-1" aria-labelledby="assignNumberModalLabel" role="dialog" aria-modal="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="assignNumberForm" autocomplete="off" action="javascript:void(0);" method="POST">
        <div class="modal-header">
          <h5 class="modal-title" id="assignNumberModalLabel">–ù–∞–∑–Ω–∞—á–∏—Ç—å –Ω–æ–º–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="assignNumberId" name="number_id">
          <div class="mb-3">
            <label for="assignNumberPhone" class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
            <input type="text" class="form-control" id="assignNumberPhone" readonly aria-readonly="true">
          </div>
          <div class="mb-3">
            <label for="employeeSelectForNumber" class="form-label">–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</label>
            <select class="form-select" id="employeeSelectForNumber" name="employee_id" aria-required="true">
              <option value="" selected>-- –û—Å–≤–æ–±–æ–¥–∏—Ç—å –Ω–æ–º–µ—Ä --</option>
            </select>
            <div class="form-text" id="employeeSelectHelp">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å —ç—Ç–æ—Ç –Ω–æ–º–µ—Ä</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn btn-primary">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="moveNumberModal" tabindex="-1" aria-labelledby="moveNumberModalLabel" role="dialog" aria-modal="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="moveNumberForm" action="javascript:void(0);" method="POST">
        <div class="modal-header">
          <h5 class="modal-title" id="moveNumberModalLabel">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –Ω–æ–º–µ—Ä –≤ –¥—Ä—É–≥–æ–π –æ—Ç–¥–µ–ª</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="moveNumberId" name="number_id">
          <input type="hidden" id="currentDepartment" name="current_department">
          <div class="mb-3">
            <label for="newDepartmentSelect" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –æ—Ç–¥–µ–ª:</label>
            <select class="form-select" id="newDepartmentSelect" name="new_department" required aria-required="true">
              <option value="" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
              <option value="—Å–≤–æ–±–æ–¥–Ω—ã–µ">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Å–≤–æ–±–æ–¥–Ω—ã–µ –Ω–æ–º–µ—Ä–∞</option>
              {% for dept in sorted_departments %}
                <option value="{{ dept }}">{{ dept }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn btn-primary">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteConfirmModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
            </div>
            <div class="modal-body">
                <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –Ω–æ–º–µ—Ä <span id="deleteNumberSpan" aria-live="polite"></span>?</p>
                <input type="hidden" id="deleteNumberId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" id="confirmDeleteBtn" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>
</div>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  const confirmButton = document.getElementById('confirmDeleteBtn');
  if (confirmButton) {
    console.log('–ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM');

    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—É—Ç, –ø—Ä—è–º–æ –≤ HTML
    confirmButton.addEventListener('click', function() {
      const numberId = document.getElementById('deleteNumberId').value;
      console.log('–û—Ç–ª–∞–¥–∫–∞: –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è, ID –Ω–æ–º–µ—Ä–∞:', numberId);
      
      if (window.deleteNumber && typeof window.deleteNumber === 'function') {
        console.log('–û—Ç–ª–∞–¥–∫–∞: –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é deleteNumber –∏–∑ HTML');
        window.deleteNumber(numberId);
      } else {
        console.error('–û—Ç–ª–∞–¥–∫–∞: –§—É–Ω–∫—Ü–∏—è deleteNumber –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        alert('–û—à–∏–±–∫–∞: —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
      }
    });
  } else {
    console.error('–û—à–∏–±–∫–∞: –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM');
  }
});
</script>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤');

  // –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ø–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏
  const debugPanel = document.createElement('div');
  debugPanel.style.cssText = `
    position: fixed;
    bottom: 10px;
    left: 10px;
    width: 300px;
    background-color: rgba(0, 0, 0, 0.8);
    color: #00ff00;
    font-family: monospace;
    padding: 10px;
    z-index: 9999;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  `;

  debugPanel.innerHTML = `
    <h3 style="color: #ffffff; margin-top: 0;">API –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
    <div>
      <label for="api-number-id">ID –ù–æ–º–µ—Ä–∞:</label>
      <input id="api-number-id" type="text" style="width: 100%; margin-bottom: 5px;">
    </div>
    <div>
      <label for="api-department">–û—Ç–¥–µ–ª:</label>
      <input id="api-department" type="text" style="width: 100%; margin-bottom: 5px;">
    </div>
    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
      <button id="api-test-delete" style="background: #ff4444; color: white;">–£–¥–∞–ª–∏—Ç—å</button>
      <button id="api-test-move" style="background: #44aaff; color: white;">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å</button>
    </div>
    <div id="api-log" style="height: 150px; overflow-y: auto; background: #111; padding: 5px; font-size: 12px;"></div>
  `;

  document.body.appendChild(debugPanel);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  function logAPI(message) {
    const logDiv = document.getElementById('api-log');
    const logEntry = document.createElement('div');
    logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
    logDiv.appendChild(logEntry);
    logDiv.scrollTop = logDiv.scrollHeight;
    console.log(message);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
  document.getElementById('api-test-delete').addEventListener('click', function() {
    const numberId = document.getElementById('api-number-id').value;
    
    if (!numberId) {
      logAPI('–û–®–ò–ë–ö–ê: –í–≤–µ–¥–∏—Ç–µ ID –Ω–æ–º–µ—Ä–∞');
      return;
    }
    
    logAPI(`–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —Å ID: ${numberId}`);
    
    // –ú–∞—Å—Å–∏–≤ URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const urls = [
      '/admin/api/delete_number',
      '/api/delete_number',
      '/delete_number',
      '/admin/delete_number'
    ];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π URL –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ
    function testNextDeleteUrl(index) {
      if (index >= urls.length) {
        logAPI('–í—Å–µ URL –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, –Ω–∏ –æ–¥–∏–Ω –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª');
        return;
      }
      
      const url = urls[index];
      logAPI(`–ü—Ä–æ–±—É–µ–º URL: ${url}`);
      
      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-Requested-With': 'XMLHttpRequest'
        },
        body: JSON.stringify({ number_id: numberId })
      })
      .then(response => {
        logAPI(`–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç ${url}: ${response.status}`);
        return response.json().catch(() => {
          return { success: false, message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON' };
        });
      })
      .then(data => {
        logAPI(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${JSON.stringify(data)}`);
        
        if (data.success) {
          logAPI(`–£–°–ü–ï–•! URL ${url} —Å—Ä–∞–±–æ—Ç–∞–ª`);
          alert(`–ù–æ–º–µ—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω —á–µ—Ä–µ–∑ ${url}`);
          setTimeout(() => window.location.reload(), 1500);
        } else {
          logAPI(`–û—à–∏–±–∫–∞: ${data.message || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`);
          // –ü—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π URL
          testNextDeleteUrl(index + 1);
        }
      })
      .catch(error => {
        logAPI(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`);
        // –ü—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π URL
        testNextDeleteUrl(index + 1);
      });
    }
    
    // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å –ø–µ—Ä–≤–æ–≥–æ URL
    testNextDeleteUrl(0);
  });
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
  document.getElementById('api-test-move').addEventListener('click', function() {
    const numberId = document.getElementById('api-number-id').value;
    const department = document.getElementById('api-department').value;
    
    if (!numberId || !department) {
      logAPI('–û–®–ò–ë–ö–ê: –í–≤–µ–¥–∏—Ç–µ ID –Ω–æ–º–µ—Ä–∞ –∏ –æ—Ç–¥–µ–ª');
      return;
    }
    
    logAPI(`–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —Å ID: ${numberId} –≤ –æ—Ç–¥–µ–ª: ${department}`);
    
    // –ú–∞—Å—Å–∏–≤ URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const urls = [
      '/admin/api/move_number',
      '/api/move_number',
      '/move_number',
      '/admin/move_number'
    ];
    
    // –í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
    const dataFormats = [
      { number_id: numberId, new_department: department },
      { number_id: numberId, new_department: department, is_free_numbers: department === '—Å–≤–æ–±–æ–¥–Ω—ã–µ' }
    ];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ URL –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
    function testNextMoveUrl(urlIndex, dataIndex) {
      if (urlIndex >= urls.length) {
        logAPI('–í—Å–µ URL –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, –Ω–∏ –æ–¥–∏–Ω –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª');
        return;
      }
      
      if (dataIndex >= dataFormats.length) {
        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É URL
        testNextMoveUrl(urlIndex + 1, 0);
        return;
      }
      
      const url = urls[urlIndex];
      const data = dataFormats[dataIndex];
      
      logAPI(`–ü—Ä–æ–±—É–µ–º URL: ${url} —Å –¥–∞–Ω–Ω—ã–º–∏: ${JSON.stringify(data)}`);
      
      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-Requested-With': 'XMLHttpRequest'
        },
        body: JSON.stringify(data)
      })
      .then(response => {
        logAPI(`–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç ${url}: ${response.status}`);
        return response.json().catch(() => {
          return { success: false, message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON' };
        });
      })
      .then(data => {
        logAPI(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${JSON.stringify(data)}`);
        
        if (data.success) {
          logAPI(`–£–°–ü–ï–•! URL ${url} —Å—Ä–∞–±–æ—Ç–∞–ª`);
          alert(`–ù–æ–º–µ—Ä —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω —á–µ—Ä–µ–∑ ${url}`);
          setTimeout(() => window.location.reload(), 1500);
        } else {
          logAPI(`–û—à–∏–±–∫–∞: ${data.message || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`);
          // –ü—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
          testNextMoveUrl(urlIndex, dataIndex + 1);
        }
      })
      .catch(error => {
        logAPI(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`);
        // –ü—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
        testNextMoveUrl(urlIndex, dataIndex + 1);
      });
    }
    
    // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å –ø–µ—Ä–≤–æ–≥–æ URL –∏ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
    testNextMoveUrl(0, 0);
  });
});
</script>

<!-- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ API –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ API');
  
  // –°–æ–∑–¥–∞–µ–º –ø–∞–Ω–µ–ª—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
  const advancedDebugPanel = document.createElement('div');
  advancedDebugPanel.id = 'advanced-debug-panel';
  advancedDebugPanel.style.cssText = `
    position: fixed;
    top: 10px;
    left: 10px;
    width: 500px;
    background-color: rgba(0, 0, 0, 0.9);
    color: #00ff00;
    font-family: monospace;
    padding: 10px;
    z-index: 10000;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    max-height: 80%;
    overflow-y: auto;
    display: none;
  `;

  advancedDebugPanel.innerHTML = `
    <h3 style="color: #ffffff; margin-top: 0;">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è API –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
    <div>
      <h4 style="color: #ffcc00;">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –º–µ—Ç–æ–¥–æ–≤</h4>
      <div style="display: flex; margin-bottom: 10px;">
        <input id="method-test-number-id" type="text" placeholder="ID –Ω–æ–º–µ—Ä–∞" style="flex: 1; margin-right: 5px;">
        <input id="method-test-dept-id" type="text" placeholder="ID –æ—Ç–¥–µ–ª–∞" style="flex: 1; margin-right: 5px;">
        <button id="run-method-test" style="background: #2196F3; color: white; border: none; padding: 5px 10px;">–¢–µ—Å—Ç –º–µ—Ç–æ–¥–æ–≤</button>
      </div>
      
      <h4 style="color: #ffcc00;">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö</h4>
      <div style="display: flex; margin-bottom: 10px;">
        <input id="format-test-number-id" type="text" placeholder="ID –Ω–æ–º–µ—Ä–∞" style="flex: 1; margin-right: 5px;">
        <input id="format-test-dept-id" type="text" placeholder="ID –æ—Ç–¥–µ–ª–∞" style="flex: 1; margin-right: 5px;">
        <button id="run-format-test" style="background: #4CAF50; color: white; border: none; padding: 5px 10px;">–¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–æ–≤</button>
      </div>
      
      <h4 style="color: #ffcc00;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h4>
      <div id="advanced-test-results" style="height: 300px; overflow-y: auto; background: #111; padding: 10px; font-size: 13px; white-space: pre-wrap;"></div>
    
      <div style="display: flex; justify-content: space-between; margin-top: 10px;">
        <button id="clear-results" style="background: #f44336; color: white; border: none; padding: 5px 10px;">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        <button id="close-panel" style="background: #333; color: white; border: none; padding: 5px 10px;">–°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å</button>
      </div>
    </div>
  `;

  document.body.appendChild(advancedDebugPanel);
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–ø—É—Å–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
  const toggleButton = document.createElement('button');
  toggleButton.id = 'toggle-advanced-debug';
  toggleButton.textContent = '–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞';
  toggleButton.style.cssText = `    position: fixed;
    top: 10px;
    right: 10px;
    background: #ff9800;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    z-index: 9999;
    cursor: pointer;
  `;
  document.body.appendChild(toggleButton);
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  function logResult(message) {
    const resultsDiv = document.getElementById('advanced-test-results');
    const timestamp = new Date().toLocaleTimeString();
    resultsDiv.innerHTML += `[${timestamp}] ${message}\n`;
    resultsDiv.scrollTop = resultsDiv.scrollHeight;
    console.log(message);
  }
  
  // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö HTTP –º–µ—Ç–æ–¥–æ–≤
  document.getElementById('run-method-test').addEventListener('click', function() {
    const numberId = document.getElementById('method-test-number-id').value;
    const deptId = document.getElementById('method-test-dept-id').value;
    
    if (!numberId || !deptId) {
      logResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ ID –Ω–æ–º–µ—Ä–∞ –∏ ID –æ—Ç–¥–µ–ª–∞');
      return;
    }
    
    logResult(`üîç –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTTP –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –Ω–æ–º–µ—Ä–∞ ${numberId} –∏ –æ—Ç–¥–µ–ª–∞ ${deptId}`);
    
    // –°–ø–∏—Å–æ–∫ HTTP –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const methods = ['GET', 'POST', 'PUT', 'PATCH', 'DELETE'];
    
    // URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const urls = [
      '/api/move_number',
      '/admin/api/move_number'
    ];
    
    // –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    const data = {
      number_id: numberId,
      new_department: deptId
    };
    
    // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL
    urls.forEach(url => {
      methods.forEach(method => {
        logResult(`üì° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${method} ${url}`);
        
        const options = {
          method: method,
          headers: {
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
          }
        };
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç
        if (method !== 'GET' && method !== 'HEAD') {
          options.body = JSON.stringify(data);
        }
        
        fetch(url, options)
          .then(response => {
            logResult(`${method} ${url} ‚Üí –°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);
            
            // –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
            return response.text().then(text => {
              try {
                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–∞–∫ JSON
                return JSON.parse(text);
              } catch (e) {
                // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç
                return { rawText: text.substring(0, 100) + (text.length > 100 ? '...' : '') };
              }
            });
          })
          .then(data => {
            logResult(`üìÑ –û—Ç–≤–µ—Ç: ${JSON.stringify(data)}`);
          })
          .catch(error => {
            logResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
          });
      });
    });
  });
  
  // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
  document.getElementById('run-format-test').addEventListener('click', function() {
    const numberId = document.getElementById('format-test-number-id').value;
    const deptId = document.getElementById('format-test-dept-id').value;
    
    if (!numberId || !deptId) {
      logResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ ID –Ω–æ–º–µ—Ä–∞ –∏ ID –æ—Ç–¥–µ–ª–∞');
      return;
    }
    
    logResult(`üîç –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–æ–º–µ—Ä–∞ ${numberId} –∏ –æ—Ç–¥–µ–ª–∞ ${deptId}`);
    
    // URL, –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É 405 (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
    const url = '/api/move_number';
    
    // –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const dataFormats = [
      // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
      {
        number_id: numberId,
        new_department: deptId
      },
      // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–∏
      {
        id: numberId,
        department_id: deptId
      },
      // –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
      {
        number: { id: numberId },
        department: { id: deptId }
      },
      // –ú–∞—Å—Å–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
      {
        params: [numberId, deptId]
      },
      // –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
      {
        number_id: numberId.toString(),
        new_department: deptId.toString()
      },
      // –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
      {
        number_id: numberId,
        new_department: deptId,
        force: true,
        timestamp: Date.now()
      }
    ];
    
    // HTTP –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
    const methods = ['PUT', 'PATCH', 'POST'];
    
    // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å –∫–∞–∂–¥—ã–º –º–µ—Ç–æ–¥–æ–º
    methods.forEach(method => {
      dataFormats.forEach((data, index) => {
        logResult(`üì° ${method} —Å —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö #${index + 1}: ${JSON.stringify(data)}`);
        
        fetch(url, {
          method: method,
          headers: {
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
          },
          body: JSON.stringify(data)
        })
        .then(response => {
          logResult(`${method} —Å —Ñ–æ—Ä–º–∞—Ç–æ–º #${index + 1} ‚Üí –°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);
          
          // –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
          return response.text().then(text => {
            try {
              // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–∞–∫ JSON
              return JSON.parse(text);
            } catch (e) {
              // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç
              return { rawText: text.substring(0, 100) + (text.length > 100 ? '...' : '') };
            }
          });
        })
        .then(data => {
          logResult(`üìÑ –û—Ç–≤–µ—Ç: ${JSON.stringify(data)}`);
        })
        .catch(error => {
          logResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
        });
      });
    });
  });
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –ø–∞–Ω–µ–ª–∏
  document.getElementById('toggle-advanced-debug').addEventListener('click', function() {
    const panel = document.getElementById('advanced-debug-panel');
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
  });
  
  document.getElementById('close-panel').addEventListener('click', function() {
    document.getElementById('advanced-debug-panel').style.display = 'none';
  });
  
  document.getElementById('clear-results').addEventListener('click', function() {
    document.getElementById('advanced-test-results').innerHTML = '';
  });
});
</script>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏ —Å–∫—Ä—ã—Ç–∏—è/–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª–æ–≤ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª–∞–º–∏');
  
  // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–¥–µ–ª–æ–≤
  const departmentHeaders = document.querySelectorAll('.department-header');
  
  departmentHeaders.forEach(header => {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    const departmentName = header.querySelector('span:first-child').textContent.trim();
    const departmentId = header.getAttribute('data-department-id') || '';
    
    // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª–æ–º
    const buttonsContainer = document.createElement('div');
    buttonsContainer.className = 'department-controls';
    
    // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤–≤–µ—Ä—Ö
    const upButton = document.createElement('button');
    upButton.className = 'btn btn-sm btn-outline-secondary me-1';
    upButton.innerHTML = '<i class="fas fa-arrow-up"></i>';
    upButton.title = '–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª –≤–≤–µ—Ä—Ö';
    upButton.onclick = function(e) {
      e.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–∞
      
      // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â—É—é —Å–µ–∫—Ü–∏—é –æ—Ç–¥–µ–ª–∞
      const currentDeptSection = header.closest('.department-section');
      const prevDeptSection = currentDeptSection.previousElementSibling;
      
      if (prevDeptSection && prevDeptSection.classList.contains('department-section')) {
        // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Ç–µ–∫—É—â—É—é —Å–µ–∫—Ü–∏—é –ø–µ—Ä–µ–¥ –ø—Ä–µ–¥—ã–¥—É—â–µ–π
        currentDeptSection.parentNode.insertBefore(currentDeptSection, prevDeptSection);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        if (departmentId) {
          saveDepartmentOrder(departmentId, 'up');
        }
      }
    };
    
    // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤–Ω–∏–∑
    const downButton = document.createElement('button');
    downButton.className = 'btn btn-sm btn-outline-secondary me-1';
    downButton.innerHTML = '<i class="fas fa-arrow-down"></i>';
    downButton.title = '–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª –≤–Ω–∏–∑';
    downButton.onclick = function(e) {
      e.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–∞
      
      // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â—É—é —Å–µ–∫—Ü–∏—é –æ—Ç–¥–µ–ª–∞
      const currentDeptSection = header.closest('.department-section');
      const nextDeptSection = currentDeptSection.nextElementSibling;
      
      if (nextDeptSection && nextDeptSection.classList.contains('department-section')) {
        // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å–µ–∫—Ü–∏—é –ø–µ—Ä–µ–¥ —Ç–µ–∫—É—â–µ–π
        currentDeptSection.parentNode.insertBefore(nextDeptSection, currentDeptSection);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        if (departmentId) {
          saveDepartmentOrder(departmentId, 'down');
        }
      }
    };
    
    // –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª–∞
    const toggleButton = document.createElement('button');
    toggleButton.className = 'btn btn-sm btn-outline-primary';
    toggleButton.innerHTML = '<i class="fas fa-chevron-up"></i>';
    toggleButton.title = '–°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª';
    toggleButton.onclick = function(e) {
      e.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
      
      // –ù–∞—Ö–æ–¥–∏–º —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–¥–µ–ª–∞
      const targetId = header.getAttribute('data-bs-target');
      const target = document.querySelector(targetId);
      
      if (target) {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        if (target.classList.contains('show')) {
          target.classList.remove('show');
          toggleButton.innerHTML = '<i class="fas fa-chevron-down"></i>';
          toggleButton.title = '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª';
        } else {
          target.classList.add('show');
          toggleButton.innerHTML = '<i class="fas fa-chevron-up"></i>';
          toggleButton.title = '–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª';
        }
      }
    };
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    buttonsContainer.appendChild(upButton);
    buttonsContainer.appendChild(downButton);
    buttonsContainer.appendChild(toggleButton);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–¥–µ–ª–∞
    header.appendChild(buttonsContainer);
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
    header.addEventListener('click', function() {
      // –ù–∞—Ö–æ–¥–∏–º —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–¥–µ–ª–∞
      const targetId = header.getAttribute('data-bs-target');
      const target = document.querySelector(targetId);
      
      if (target) {
        setTimeout(() => {
          // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
          if (target.classList.contains('show')) {
            toggleButton.innerHTML = '<i class="fas fa-chevron-up"></i>';
            toggleButton.title = '–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª';
          } else {
            toggleButton.innerHTML = '<i class="fas fa-chevron-down"></i>';
            toggleButton.title = '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª';
          }
        }, 350); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ Bootstrap
      }
    });
  });
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –æ—Ç–¥–µ–ª–æ–≤
  function saveDepartmentOrder(departmentId, direction) {
    console.log(`–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –æ—Ç–¥–µ–ª–∞ ${departmentId}, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${direction}`);
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
    const data = {
      department_id: departmentId,
      direction: direction
    };
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    fetch('/api/update_department_order', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Requested-With': 'XMLHttpRequest'
      },
      body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        console.log('–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–¥–µ–ª–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω');
      } else {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ—Ä—è–¥–∫–∞ –æ—Ç–¥–µ–ª–∞:', data.message);
      }
    })
    .catch(error => {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞:', error);
    });
  }
  
  // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª–∞–º–∏
  const style = document.createElement('style');
  style.textContent = `
    .department-controls {
      display: flex;
      align-items: center;
    }
    .department-header {
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background-color: #f8f9fa;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .department-header:hover {
      background-color: #e9ecef;
    }
  `;
  document.head.appendChild(style);
});
</script> 
