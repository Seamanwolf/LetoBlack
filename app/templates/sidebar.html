<div class="sidebar">
    {% if 'Дашборд' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ current_user.role == 'user' and url_for('broker.broker_dashboard') or url_for('admin_dashboard.admin_dashboard') }}" {% if (current_user.role == 'user' and request.endpoint == 'broker.broker_dashboard') or (current_user.role != 'user' and (request.endpoint == 'admin_dashboard.admin_dashboard' or request.endpoint == 'admin.admin_dashboard')) %}class="active"{% endif %}>
        <i class="fas fa-home"></i>
        <span>Дашборд</span>
    </a>
    {% endif %}

    {% if current_user.role == 'user' %}
    <a href="{{ url_for('broker.my_stats') }}" {% if request.endpoint == 'broker.my_stats' %}class="active"{% endif %}>
        <i class="fas fa-chart-bar"></i>
        <span>Моя статистика</span>
    </a>
    {% endif %}
    
    {% if current_user.role in ['leader', 'deputy'] %}
    <a href="{{ url_for('leader.leader_main') }}" {% if request.endpoint == 'leader.leader_main' %}class="active"{% endif %}>
        <i class="fas fa-home"></i>
        <span>Главная</span>
    </a>
    <a href="{{ url_for('leader.my_department') }}" {% if request.endpoint == 'leader.my_department' %}class="active"{% endif %}>
        <i class="fas fa-users-cog"></i>
        <span>Мой отдел</span>
    </a>
    <a href="{{ url_for('leader.statistics') }}" {% if request.endpoint == 'leader.statistics' %}class="active"{% endif %}>
        <i class="fas fa-chart-line"></i>
        <span>Статистика</span>
    </a>
    <a href="{{ url_for('leader.settings') }}" {% if request.path.startswith('/leader/settings') %}class="active"{% endif %}>
        <i class="fas fa-cog"></i>
        <span>Настройки</span>
    </a>
    {% endif %}
    {% if 'Персонал' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('admin_routes_unique.personnel') }}" {% if request.endpoint == 'admin_routes_unique.personnel' or request.endpoint == 'admin_routes_unique.fired_employees' or request.endpoint == 'admin_routes_unique.personnel_dashboard' %}class="active"{% endif %}>
        <i class="fas fa-users"></i>
        <span>Персонал</span>
    </a>
    {% endif %}
    {% if 'Рейтинг' in accessible_modules or current_user.role == 'admin' %}
    {% if current_user.role != 'leader' and current_user.role != 'deputy' %}
    <a href="{{ url_for('rating.show_rating') }}" {% if request.endpoint == 'rating.show_rating' %}class="active"{% endif %}>
        <i class="fas fa-star"></i>
        <span>Рейтинг</span>
    </a>
    {% endif %}
    {% endif %}
    {% if 'Колл-центр' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('callcenter.call_center_dashboard') }}" {% if request.endpoint == 'callcenter.call_center_dashboard' %}class="active"{% endif %}>
        <i class="fas fa-phone"></i>
        <span>Колл-центр</span>
    </a>
    {% endif %}
    {% if 'Хелпдеск' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('helpdesk.index') }}" {% if request.endpoint and request.endpoint.startswith('helpdesk.') %}class="active"{% endif %}>
        <i class="fas fa-life-ring"></i>
        <span>Хелпдеск</span>
    </a>
    {% endif %}
    {% if 'IT-Tech' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('itinvent.it_tech_dashboard') }}" {% if request.endpoint and request.endpoint.startswith('itinvent.') %}class="active"{% endif %}>
        <i class="fas fa-desktop"></i>
        <span>IT-Tech</span>
    </a>
    {% endif %}
    {% if 'Новости' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ current_user.is_admin and url_for('admin_news.list_news') or url_for('news.index') }}" {% if request.endpoint and (request.endpoint.startswith('news.') or request.endpoint.startswith('admin_news.')) %}class="active"{% endif %}>
        <i class="fas fa-newspaper"></i>
        <span>Новости</span>
    </a>
    {% endif %}
    {% if 'ВАТС' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('vats.index') }}" {% if request.endpoint and request.endpoint.startswith('vats.') %}class="active"{% endif %}>
        <i class="fas fa-phone-alt"></i>
        <span>ВАТС</span>
    </a>
    {% endif %}
    {% if 'АВИТО-ПРО' in accessible_modules or current_user.role == 'admin' %}
    <a href="{{ url_for('avito.avito_category', category='Вторички') }}" {% if request.endpoint and request.endpoint.startswith('avito.') %}class="active"{% endif %}>
        <i class="fas fa-home"></i>
        <span>Авито-Про</span>
    </a>
    {% endif %}
    {% if current_user.role == 'admin' %}
    <a href="{{ url_for('admin.settings') }}" {% if request.endpoint == 'admin.settings' %}class="active"{% endif %}>
        <i class="fas fa-cog"></i>
        <span>Настройки</span>
    </a>
    {% endif %}
</div> 